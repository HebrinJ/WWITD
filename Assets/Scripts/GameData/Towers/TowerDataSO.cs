using UnityEngine;

/// <summary>
/// ScriptableObject содержащий все параметры и характеристики конкретного типа оборонительного сооружения (башни).
/// Создается через меню Assets/Create/Game Data/Tower Data.
/// Используется <see cref="BuildManager"/> для валидации стоимости постройки и <see cref="TowerBehaviour"/> для настройки экземпляра башни.
/// Все экземпляры должны быть зарегистрированы в центральном реестре <see cref="GameData"/>.
/// </summary>
[CreateAssetMenu(fileName = "Data_Tower_", menuName = "Game Data/Tower Data")]
public class TowerDataSO : ScriptableObject
{
    /// <summary>
    /// Уникальное внутреннее имя башни для идентификации в системе.
    /// Соответствует ID из дизайн-документа (например: "riflemen", "howitzer").
    /// Не отображается игроку напрямую.
    /// </summary>
    [Tooltip("Уникальное ID башни (riflemen, howitzer, etc.). Соответствует дизайн-документу.")]
    public string towerName;

    /// <summary>
    /// Тип башни из перечисления. Определяет тактическую роль и визуальное представление.
    /// Используется системами улучшения и логикой выбора целей.
    /// </summary>
    [Tooltip("Тактический тип башни. Определяет роль на поле боя.")]
    public TowerType towerType;

    /// <summary>
    /// Массив ресурсов, необходимых для постройки башни.
    /// Может содержать несколько элементов для комплексной стоимости (например, деньги + железо).
    /// Проверяется системой строительства перед размещением.
    /// </summary>
    [Tooltip("Ресурсы, требуемые для постройки. Может содержать несколько типов.")]
    public ResourceCost[] constructionCost;

    /// <summary>
    /// Максимальное количество здоровья (HP) башни.
    /// При достижении 0 башня уничтожается.
    /// Может быть увеличено через исследования в соответствующей ветке.
    /// </summary>
    [Tooltip("Максимальное количество здоровья (HP).")]
    public int maxHealth;

    /// <summary>
    /// Максимальное количество брони башни.
    /// Броня поглощает урон до своего полного истощения, после чего башня получает урон по здоровью.
    /// Для большинства типов урона (кроме piercing) наносит 1 ед. урона броне за атаку.
    /// Может быть увеличено через исследования.
    /// </summary>
    [Tooltip("Максимальное количество брони. Поглощает урон до истощения.")]
    public int maxArmor;

    /// <summary>
    /// Тип урона, который наносит башня при атаке.
    /// Определяет модификаторы против брони целей и дополнительные эффекты.
    /// Соответствует типам урона из боевой системы дизайн-документа.
    /// </summary>
    [Tooltip("Тип урона (bullet, fire, explode, piercing, antiair).")]
    public DamageType damageType;

    /// <summary>
    /// Базовый урон, наносимый за одну атаку по цели.
    /// Может модифицироваться типом урона против брони цели.
    /// Может быть увеличен через исследования в соответствующей ветке.
    /// </summary>
    [Tooltip("Базовый урон за одну атаку.")]
    public int damage;

    /// <summary>
    /// Дальность атаки башни в юнитах мира.
    /// Определяет радиус, в пределах которого башня может обнаруживать и атаковать цели.
    /// Может быть увеличена через исследования или при постройке на холме (+15%).
    /// </summary>
    [Tooltip("Радиус атаки в юнитах мира.")]
    public float fireDistance;

    /// <summary>
    /// Скорострельность башни (выстрелов в секунду).
    /// Определяет интервал между атаками.
    /// Может быть увеличена через исследования в соответствующей ветке.
    /// </summary>
    [Tooltip("Количество выстрелов в секунду.")]
    public float fireRate;

    /// <summary>
    /// Префаб самой башни, который инстанцируется на карте при постройке.
    /// Должен содержать компонент <see cref="TowerBehaviour"/> и коллайдер для взаимодействия.
    /// </summary>
    [Tooltip("Префаб башни с компонентом TowerBehaviour и коллайдером.")]
    public GameObject towerPrefab;

    /// <summary>
    /// Префаб снаряда, который инстанцируется при атаке башни.
    /// Должен содержать компонент <see cref="Projectile"/> для обработки попадания.
    /// Если атака является мгновенной (луч, hitscan), может быть null.
    /// </summary>
    [Tooltip("Префаб снаряда с компонентом Projectile. Для hitscan-атак может быть null.")]
    public GameObject projectilePrefab;
}