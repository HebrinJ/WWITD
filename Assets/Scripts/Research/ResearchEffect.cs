using UnityEngine;

/// <summary>
/// Структура данных, определяющая конкретный эффект исследования в древе технологий.
/// Описывает игровое преимущество, которое получает игрок после исследования узла.
/// Может модифицировать параметры башен, добавлять глобальные бонусы или разблокировать новый контент.
/// </summary>
[System.Serializable]
public class ResearchEffect
{
    /// <summary>
    /// Тип эффекта исследования. Определяет категорию и способ применения эффекта.
    /// </summary>
    public enum EffectType
    {
        /// <summary>
        /// Модификатор параметров конкретного типа башен.
        /// Пример: +10 к урону стрелковых башен.
        /// Использует TargetId для указания типа башни и Value для значения модификатора.
        /// </summary>
        TowerStatModifier,

        /// <summary>
        /// Глобальный бонус, применяемый ко всей игровой сессии.
        /// Пример: +50 к стартовым деньгам на уровне.
        /// Использует TargetId для указания типа бонуса и Value для значения.
        /// </summary>
        GlobalBonus,

        /// <summary>
        /// Разблокировка нового грейда (уровня) башни.
        /// Пример: разблокировка улучшенной версии стрелковой башни.
        /// Использует TargetId для указания типа башни и StringValue для спецификации грейда.
        /// </summary>
        UnlockTowerGrade,

        /// <summary>
        /// Разблокировка новой глобальной способности.
        /// Пример: разблокировка способности "Артподдержка".
        /// Использует TargetId для идентификации способности.
        /// </summary>
        UnlockAbility
    }

    /// <summary>
    /// Тип эффекта исследования. Определяет как будет применен этот эффект.
    /// </summary>
    [Tooltip("Тип эффекта исследования (модификатор, разблокировка и т.д.).")]
    public EffectType Type;

    /// <summary>
    /// Идентификатор цели, к которой применяется эффект.
    /// Зависит от Type:
    /// - TowerStatModifier: TowerType (например, "Riflemen")
    /// - GlobalBonus: тип глобального бонуса (например, "StartingMoney")
    /// - UnlockTowerGrade: TowerType (например, "Riflemen") 
    /// - UnlockAbility: идентификатор способности (например, "ArtilleryStrike")
    /// </summary>
    [Tooltip("ID цели эффекта (тип башни, тип бонуса, способность и т.д.).")]
    public string TargetId;

    /// <summary>
    /// Числовое значение эффекта. Используется для модификаторов и бонусов.
    /// Зависит от Type:
    /// - TowerStatModifier: значение модификатора (например, 0.1 для +10%)
    /// - GlobalBonus: значение бонуса (например, 50 для +50 денег)
    /// - UnlockTowerGrade: не используется
    /// - UnlockAbility: не используется
    /// </summary>
    [Tooltip("Числовое значение эффекта (для модификаторов и бонусов).")]
    public float Value;

    /// <summary>
    /// Строковое значение для сложных эффектов, требующих дополнительных параметров.
    /// Зависит от Type:
    /// - TowerStatModifier: название параметра (например, "Damage", "Range")
    /// - GlobalBonus: не используется
    /// - UnlockTowerGrade: идентификатор грейда (например, "Grade1", "Grade2")
    /// - UnlockAbility: не используется
    /// </summary>
    [Tooltip("Строковое значение для дополнительных параметров эффекта.")]
    public string StringValue;
}